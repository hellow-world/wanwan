webpackJsonp([26],{0:function(e,t,a){e.exports=a(22)},22:function(e,t,a){function n(e){$.Huimodalalert(e,3e3)}function i(){var e=new Date,t="-",a=":",n=e.getMonth()+1,i=e.getDate(),d=e.getHours(),p=e.getMinutes(),c=e.getSeconds();n>=1&&n<=9&&(n="0"+n),i>=0&&i<=9&&(i="0"+i),d>=0&&d<=9&&(d="0"+d),p>=0&&p<=9&&(p="0"+p),c>=0&&c<=9&&(c="0"+c);var l=e.getFullYear()+t+n+t+i+" "+d+a+p+a+c;return l}function d(){var e=$("#card_title").val(),t=$("#card_introduce").val(),a=$("#card_place").val(),d=$("#card_num").val(),m=$("#purchase_num").val(),u=$("#product_type").val(),h=$("#pay_way").val(),f=$("#card_price").val(),_=$("#card_putaway_time").val(),v=$("#cardpurchase_start_time").val(),T=$("#cardpurchase_end_time").val(),y=$("#card_start_time").val(),g=$("#card_end_time").val(),w=$("div#card_content").froalaEditor("html.get"),E=w.replace(/style\s*=(['\"\s]?)[^'\"]*?\1/gi,""),E=E.replace(/width\s*:(['\"\s]?)[^'\"]*?\1/gi,""),S=i();if(""==e||e.length>19)$("#Tip").html("标题不能为空或长度不能超过19个字符");else if(""==document.getElementById("titlePic").value)$("#Tip").html("请上传正确格式的标题图片");else if(""==document.getElementById("coverPic").value)$("#Tip").html("请上传正确格式的封面图片");else if(""==t||t.length>39)$("#Tip").html("简介不能为空或长度超过39");else if(""==a)$("#Tip").html("商品地点必填");else if(""==d)$("#Tip").html("商品数量必填");else if(""==m)$("#Tip").html("购买数量必填");else if(""==u)$("#Tip").html("产品类型必填");else if(""==h)$("#Tip").html("支付方式必填");else if(""==f)$("#Tip").html("商品价格必填");else if(""==_)$("#Tip").html("上架时间必填");else if(""==y||""==g)$("#Tip").html("开始时间必填");else if(""==v||""==T)$("#Tip").html("购买时间必填");else{1==r&&(o=$("#notify_content").val(),s=$("#push_time").val());var P=new FormData;P.append("cardTitle",e),P.append("cardIntroduce",t),P.append("place",a),P.append("cardSum",d),P.append("cardRestrictSum",m),P.append("type",u),P.append("currencyType",h),P.append("cardPrice",f),P.append("cardStartTime",y),P.append("cardEndTime",g),P.append("cardPutawayTime",_),P.append("purchaseStartTime",v),P.append("purchaseEndTime",T),P.append("cardContent",E),P.append("cardCreateTime",S),P.append("sponsorName",l),P.append("title",document.getElementById("titlePic").files[0]),P.append("cover",document.getElementById("coverPic").files[0]),P.append("isPushed",r),P.append("notifyContent",o),P.append("notifyTime",s),$.ajax({url:p.basePath+"card/add",type:"POST",dataType:"json",processData:!1,contentType:!1,data:P,success:function(e){e.code==c.REQUEST_SUCCESS?(n("已成功添加"),setTimeout(function(e){window.history.back()},1e3)):alert("添加失败:"+e.msg)},error:function(e,t,a){alert(e.status)}})}}var p=a(1),c=a(3),l=(a(2),"");$(function(){$("#card_content").froalaEditor({theme:"dark",imageUploadURL:p.basePath+"uploadImgEditor",language:"zh_cn",height:200})});var r=1,o="",s="";window.onClickHander=function(e){e.checked?($("#notify_content").show(),$("#push_time_div").show(),o=$("#notify_content").val(),s=$("#push_time").val(),r=1):($("#notify_content").hide(),$("#push_time_div").hide(),o="",s="",r=0)},$("#btnaddSubmit").on("click",function(){d()})}});